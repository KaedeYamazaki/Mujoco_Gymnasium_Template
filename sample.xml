<mujoco>

    <default>
        <default class="inner_wall_touch_site">
            <site type="box" size="0.9 0.7 0.3" pos="0 0 0" rgba="0 1 0 0.5"/>
        </default>
        <default class="out_wall_touch_site_1">
            <site type="box" size="1.6 0.2 0.3" pos="0 0 0" rgba="1 0 0 0.5"/>
        </default>
        <default class="out_wall_touch_site_2">
            <site type="box" size="0.2 1.8 0.3" pos="0 0 0" rgba="1 0 0 0.5"/>
        </default>
    </default>



    <asset>
        <texture name="grid" type="2d" builtin="checker" width="512" height="512" rgb1=".1 .2 .3" rgb2=".2 .3 .4"/>
        <material name="grid" texture="grid" texrepeat="1 1" texuniform="true" reflectance=".2"/>
    </asset>

    <worldbody>
        <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1" />

        <!-- ルンバ関連 -->
        <body pos="-1.25 1 0.55">
            <freejoint />
            <geom name="main_body" type="cylinder" size=".16 .040 " rgba="0.1 0.1 0.1 1" pos="0 0 0" />

            <!-- センサ関連 -->
            <site name="sensor_right_01" type="box" size="0.003 0.003 0.003" pos="0.13 -0.1 0.01" zaxis="1 -1 0" rgba=".5 1 .5 1"/>
            <site name="sensor_right_02" type="box" size="0.003 0.003 0.003" pos="0.15 -0.05 0.01" zaxis="1 -0.5 0" rgba=".5 1 .5 1"/>
            <site name="sensor_front" type="box" size="0.003 0.003 0.003" pos="0.16 0 0.01" zaxis="1 0 0" rgba=".5 1 .5 1"/>
            <site name="sensor_left_01" type="box" size="0.003 0.003 0.003" pos="0.13 0.1 0.01" zaxis="1 1 0" rgba=".5 1 .5 1"/>
            <site name="sensor_left_02" type="box" size="0.003 0.003 0.003" pos="0.15 0.05 0.01" zaxis="1 0.5 0" rgba=".5 1 .5 1"/>

            <!-- 車輪 -->
            <body name="left wheel" pos="-0.04 .13 -.02" zaxis="0 1 0">
                <joint name="left wheel joint" type="hinge" axis="0 0 1" limited="false" />
                <geom type="cylinder" size=".036 .01" rgba=".5 .5 1 1" />
                <site type="box" rgba="1 1 1 1" size=".006 .036 .012" />
            </body>

            <body name="right wheel" pos="-0.04 -.13 -.02" zaxis="0 1 0">
                <joint name="right wheel joint" type="hinge" axis="0 0 1" limited="false" />
                <geom type="cylinder" size=".036 .01" rgba=".5 .5 1 1" />
                <site type="box" rgba="1 1 1 1" size=".006 .036 .012" />
            </body>

            <body name="flont_ball" pos=".13 0 -.035">
                <joint type="ball" limited="false" />
                <geom type="sphere" size=".02" rgba=".8 .8 0 1" />
                <site type="box" rgba="1 0 0 1" size=".006 .02 .006" />
            </body>

            <camera name = "tracking_camera" mode = "track" pos = "-0.4 0 0.8" euler = "0 -30 -90" fovy = "60"/>
        </body>


        <!-- 以下ステージ関連 -->
        <geom type="plane" size="1.5 1.5 .01" material="grid"/>

        <!-- 内壁関連 -->
        <body name = "wall_1" pos="0 0.9 0.25">
            <geom name = "wall_1_geom" type="box" size="0.8 0.60 0.25" rgba="1 0 0 1"/>
            <site name="inner_wall_touch_1" class = "inner_wall_touch_site"/>
        </body>
        <body name = "wall_2" pos="0 -0.9 0.25">
            <geom name = "wall_2_geom" type="box" size="0.8 0.60 0.25" rgba="0 1 0 1"/>
            <site name="inner_wall_touch_2" class = "inner_wall_touch_site"/>
        </body>


        <!-- 外壁関連 -->
        <body name = "out_wall_1" pos="0 1.6 0.25">
            <geom name = "out_wall_1_geom" type="box" size="1.5 0.1 0.25" rgba="0 0 1 1"/>
            <site name="out_wall_touch_1" class = "out_wall_touch_site_1"/>
        </body>
        <body name = "out_wall_2" pos="0 -1.6 0.25">
            <geom name = "out_wall_2_geom" type="box" size="1.5 0.1 0.25" rgba="0 0 1 1"/>
            <site name="out_wall_touch_2" class = "out_wall_touch_site_1"/>
        </body>
        <body name = "out_wall_3" pos="-1.6 0 0.25">
            <geom name = "out_wall_3_geom" type="box" size="0.1 1.7 0.25" rgba="0 0 1 1"/>
            <site name="out_wall_touch_3" class = "out_wall_touch_site_2"/>
        </body>
        <body name = "out_wall_4" pos="1.6 0 0.25">
            <geom name = "out_wall_4_geom" type="box" size="0.1 1.7 0.25" rgba="0 0 1 1"/>
            <site name="out_wall_touch_4" class = "out_wall_touch_site_2"/>
        </body>


    </worldbody>

    <!-- アクチュエータ -->
    <actuator>
        <motor name="right" joint="right wheel joint" />
        <motor name="left" joint="left wheel joint" />
    </actuator>

    <!-- センサ -->
    <sensor>
        <rangefinder name="right_rangefinder_1" site="sensor_right_01"/>
        <rangefinder name="right_rangefinder_2" site="sensor_right_02"/>
        <rangefinder name="left_rangefinder_1" site="sensor_left_01"/>
        <rangefinder name="left_rangefinder_2" site="sensor_left_02"/>
        <rangefinder name="front_rangefinder" site="sensor_front"/>

        <touch name="inner_touch_sensor_1" site="inner_wall_touch_1"/>
        <touch name="inner_touch_sensor_2" site="inner_wall_touch_2"/>
        <touch name="out_touch_sensor_1" site="out_wall_touch_1"/>
        <touch name="out_touch_sensor_2" site="out_wall_touch_2"/>
        <touch name="out_touch_sensor_3" site="out_wall_touch_3"/>
        <touch name="out_touch_sensor_4" site="out_wall_touch_4"/>

    </sensor>
</mujoco>